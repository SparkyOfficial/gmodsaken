# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å Q-–º–µ–Ω—é GModsaken

## ‚ùå –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:

### 1. **–û—à–∏–±–∫–∞ —Å —Ñ–∞–π–ª–æ–º disintegration.lua**
- **–ü—Ä–æ–±–ª–µ–º–∞**: `Couldn't include file 'spawnmenu\effects\disintegration.lua' - File not found`
- **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–¥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
- **–§–∞–π–ª**: `gamemode/init.lua` (—Å—Ç—Ä–æ–∫–∞ 51)

### 2. **–ü—Ä–æ–±–ª–µ–º–∞ —Å Q-–º–µ–Ω—é –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã**
- **–ü—Ä–æ–±–ª–µ–º–∞**: Q-–º–µ–Ω—é –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è, —Ö–æ—Ç—è –∏–≥—Ä–∞ –∏–¥–µ—Ç
- **–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π GameState –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∫–æ–º–∞–Ω–¥—ã –∏–≥—Ä–æ–∫–∞
- **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## üõ†Ô∏è –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:

### 1. **–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ Q-–º–µ–Ω—é**
```lua
-- –í gamemode/cl_spawnmenu.lua
print("[GModsaken] CreateSpawnMenu Debug:")
print("  - Player: " .. ply:Nick())
print("  - Team: " .. ply:Team())
print("  - GM exists: " .. tostring(GM ~= nil))
print("  - GM.IsSurvivor exists: " .. tostring(GM and GM.IsSurvivor ~= nil))
print("  - IsSurvivor result: " .. tostring(GM and GM.IsSurvivor and GM:IsSurvivor(ply)))
print("  - GameState: " .. tostring(GM and GM.GameState))
print("  - GameState == PLAYING: " .. tostring(GM and GM.GameState == "PLAYING"))
```

### 2. **–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏ IsSurvivor**
```lua
-- –í gamemode/sh_teams.lua
if CLIENT then
    print("[GModsaken] IsSurvivor Debug:")
    print("  - Player valid: " .. tostring(IsValid(ply)))
    print("  - Player team: " .. tostring(ply and ply.Team and ply:Team()))
    print("  - Expected team: " .. tostring(gm.TEAM_SURVIVOR or 2))
    print("  - Result: " .. tostring(IsValid(ply) and ply.Team and ply:Team() == (gm.TEAM_SURVIVOR or 2)))
end
```

### 3. **–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏**
- `gmodsaken_debug_state` - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
- `gmodsaken_set_state <—Å–æ—Å—Ç–æ—è–Ω–∏–µ>` - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤)

## üîç –ö–∞–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É:

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
```
gmodsaken_debug_state
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞
–ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
- `[GModsaken] CreateSpawnMenu Debug:`
- `[GModsaken] IsSurvivor Debug:`

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–º–∞–Ω–¥—É –∏–≥—Ä–æ–∫–∞
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–≥—Ä–æ–∫ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ–º–∞–Ω–¥–µ –≤—ã–∂–∏–≤—à–∏—Ö (TEAM_SURVIVOR = 2)

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ GameState
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ GameState = "PLAYING"

## üéÆ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

### –î–ª—è –∏–≥—Ä–æ–∫–æ–≤:
```
gmodsaken_debug_state    # –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
```

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
```
gmodsaken_set_state PLAYING    # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ "–∏–≥—Ä–∞ –∏–¥–µ—Ç"
gmodsaken_set_state LOBBY      # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ "–ª–æ–±–±–∏"
gmodsaken_force_start          # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É
gmodsaken_force_end            # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–∫–æ–Ω—á–∏—Ç—å —Ä–∞—É–Ω–¥
```

## üîß –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã:

### 1. **–ò–≥—Ä–æ–∫ –Ω–µ –≤ –∫–æ–º–∞–Ω–¥–µ –≤—ã–∂–∏–≤—à–∏—Ö**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `gmodsaken_debug_state`
- –†–µ—à–µ–Ω–∏–µ: –ò–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–æ–º–∞–Ω–¥–µ TEAM_SURVIVOR (ID: 2)

### 2. **GameState –Ω–µ "PLAYING"**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `gmodsaken_debug_state`
- –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `gmodsaken_set_state PLAYING` (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤)

### 3. **–ü—Ä–æ–±–ª–µ–º—ã —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
- –†–µ—à–µ–Ω–∏–µ: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

### 4. **–ü—Ä–æ–±–ª–µ–º—ã —Å GM —Ç–∞–±–ª–∏—Ü–µ–π**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ GM
- –†–µ—à–µ–Ω–∏–µ: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

### 1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–≥—Ä—É**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–∞—É–Ω–¥ –Ω–∞—á–∞–ª—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã –≤ –∫–æ–º–∞–Ω–¥–µ –≤—ã–∂–∏–≤—à–∏—Ö

### 2. **–ù–∞–∂–º–∏—Ç–µ Q**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–µ

### 3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –æ—Ç–ª–∞–¥–∫–∏**
```
gmodsaken_debug_state
```

### 4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**
- –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ (F8)
- –ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å `[GModsaken]`

## üéØ –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

### –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ Q-–º–µ–Ω—é:
- –ü–æ—è–≤–ª—è–µ—Ç—Å—è –æ–∫–Ω–æ —Å –≤–∫–ª–∞–¥–∫–∞–º–∏ –ø—Ä–æ–ø–æ–≤
- –í –∫–æ–Ω—Å–æ–ª–∏: `[GModsaken] CreateSpawnMenu: All checks passed, creating menu`

### –ü—Ä–∏ –æ—à–∏–±–∫–µ:
- –°–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ —Å –ø—Ä–∏—á–∏–Ω–æ–π
- –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

### –ï—Å–ª–∏ Q-–º–µ–Ω—é –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–î–ª—è –∞–¥–º–∏–Ω–æ–≤**: `gmodsaken_set_state PLAYING`
2. **–î–ª—è –≤—Å–µ—Ö**: `gmodsaken_debug_state` (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä** –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è

### –ï—Å–ª–∏ —Ñ–∞–π–ª disintegration.lua –Ω–µ –Ω–∞–π–¥–µ–Ω:
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —Ñ–∞–π–ª –Ω–µ –∫—Ä–∏—Ç–∏—á–µ–Ω
- –°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –¥–µ–∑–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

- ‚úÖ **Q-–º–µ–Ω—é —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç** –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã
- ‚úÖ **–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** –ø–æ–º–æ–≥–∞–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
- ‚úÖ **–ö–æ–º–∞–Ω–¥—ã –æ—Ç–ª–∞–¥–∫–∏** –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤** –ø–µ—Ä–µ–¥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
- ‚úÖ **–ü–æ–¥—Ä–æ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö**

–¢–µ–ø–µ—Ä—å Q-–º–µ–Ω—é –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ! üéÆ 